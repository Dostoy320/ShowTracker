{% extends "layout.html" %}
{% block body %}

    {% for message in form.show_name.errors %}
      <div class="flash">{{ message }}</div>
    {% endfor %}

    <form action="{{ url_for('new_show') }}" method=post class=add-entry>
      {{ form.hidden_tag() }}

      {{ form.show_name.label }}
      {{ form.show_name }}

      {{ form.search }}
    </form>

  <!-- Return list of shows from query -->
  {% if choices %}
  <p>Results for <strong>{{ choices[0]['name'] }}</strong>:
    <ul>
    {% for choice in choices %}
      <li><a href="{{ url_for('retrieve_show') }}?value={{ choice['id'] }}">
      {{ choice['name'] }} {{ choice['first_air_date'] }}</li>
    {% endfor %}
  {% endif %}

  <!-- Return info for specific show -->
  {% if show %}
    <div id='show_detail'>
    <h4>{{ show['name'] }}</h4>
    <p>{{ show['overview'] }}</p>
    </div>
    <form action="{{ url_for('add_show') }}" method=post id='show_submit' class='add-entry'>
      {{ form.show_id }}
      {{ form.submit }}
    </form>
  {% endif %}

  <script src="{{ url_for('static', filename='scripts/add_show.js') }}"></script>

  {% block details %}{% endblock %}
{% endblock %}